# 达人探店

tb_blog:探店笔记表

tb_blog_comments:其他用户对探店笔记的评价

## 发布探店笔记

post，纯业务问题

选择图片时图片会先保存到nginx的安装目录（自己配的

上传探店笔记会写入到数据库

## 点赞

点赞数目保存到了数据库中

点赞用户保存到了redis中，用redis的set保存点赞用户的id

## 点赞排行榜

为了实现排行榜，使用sortedset

blog:liked:{id}作为key

value是用户id，score是时间戳，按时间戳排序

这样就可以按时间得到点赞的前n名

根据用户id查询用户`WHERE id IN (5,1)`这样返回的结果不是按照(5,1)的顺序,为了实现按顺序返回结果，可以`WHERE id IN (5,1) ORDER BY FIELD(id,5,1)`

## 查看探店笔记

查看探店笔记时需要看该登录用户是否已经点赞（不能重复点赞

可以根据笔记id查看探店笔记

对于主页，显示出5个点赞最多的探店笔记

对于每个探店笔记，显示出5个点赞的用户，按点赞顺序排序